<div [formGroup]="parentForm">
  <div formArrayName="questionGroupsFormArray">
    <div formArrayName="{{questionGroupIndex}}">
      <label [attr.for]="'question' + question.id" class="form-label">
        #{{ questionIndex + 1 }}: {{ question.text }}
      </label>
      <span *ngIf="question.required">*</span>

      <div formGroupName="{{ questionIndex }}">
        <div *ngFor="let checkbox of question.checkboxGroup?.checkboxes; index as checkboxIndex">
          <div class="row ms-2 mb-1">
            <div class="col-auto ps-1 pe-0">
              <input [attr.id]="'checkbox' + checkbox.id + 'Question' + question.id"
                     class="form-check-input me-2" formControlName="checkboxId"
                     [attr.name]="'question' + question.id"
                     type="radio" value="{{ checkboxIndex }}"
                     (click)="disableEnableInput(checkbox)">
            </div>
            <div class="col">
              <label [attr.for]="'checkbox' + checkbox.id + 'Question' + question.id"
                     class="form-check-labels">
                {{ checkbox.text }}<span *ngIf="checkbox.hasTextField">:</span>
              </label>
            </div>
          </div>
          <div class="row ms-5 me-3 mb-1" *ngIf="checkbox.hasTextField">
            <input [attr.id]="'checkbox' + checkbox.id + 'text'" type="text" class="form-control"
                   formControlName="text"
                   [attr.name]="'checkbox' + checkbox.id + 'Question' + question.id">
          </div>
        </div>
        <div class="alert alert-danger p-2 my-2 ms-5 me-3" *ngIf="text?.invalid">
          <span *ngIf="text?.errors?.required">Das Textfeld muss ausgefüllt sein.</span>
          <span *ngIf="text?.errors?.maxlength">Ihre Antwort darf nicht länger als 1500 Zeichen sein.</span>
        </div>
        <div class="alert alert-danger p-2 my-2 ms-5 me-3" *ngIf="checkboxId?.errors?.required">
          Diese Frage muss beantwortet werden.
        </div>
      </div>
    </div>
  </div>
</div>
